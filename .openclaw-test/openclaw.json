{
  // Test config for plugin development and integration tests.
  // Start: OPENCLAW_CONFIG_PATH=.openclaw-test/openclaw.json OPENCLAW_STATE_DIR=.openclaw-test/state openclaw gateway run --verbose
  // Requires ANTHROPIC_API_KEY, OPENCLAW_GATEWAY_TOKEN, and OPENROUTER_API_KEY in env (or .env file).

  "gateway": {
    "mode": "local",
    "port": 18789,
    "bind": "loopback",
    "auth": {
      "token": "${OPENCLAW_GATEWAY_TOKEN}"
    },
    "http": {
      "endpoints": {
        "chatCompletions": { "enabled": true }
      }
    }
  },

  "agents": {
    "list": [
      {
        "id": "main",
        "default": true,
        "workspace": ".openclaw-test/workspaces/main",
        "subagents": { "allowAgents": ["search"] }
      },
      {
        "id": "search",
        "workspace": ".openclaw-test/workspaces/search",
        "tools": {
          "allow": ["web_search", "web_fetch", "sessions_send", "session_status"],
          "deny": ["exec", "read", "write", "edit", "apply_patch", "process", "browser", "gateway", "cron"]
        },
        "subagents": { "allowAgents": [] }
      }
    ]
  },

  "plugins": {
    "enabled": true,
    "load": {
      "paths": [
        "./extensions/channel-guard",
        "./extensions/content-guard"
      ]
    },
    "entries": {
      "channel-guard": {
        "enabled": true,
        "config": {
          "sensitivity": 0.5,
          "warnThreshold": 0.4,
          "blockThreshold": 0.8,
          "failOpen": false,
          "logDetections": true
        }
      },
      "content-guard": {
        "enabled": true,
        "config": {
          "model": "anthropic/claude-haiku-4-5",
          "maxContentLength": 50000,
          "timeoutMs": 15000
        }
      }
    }
  }
}
